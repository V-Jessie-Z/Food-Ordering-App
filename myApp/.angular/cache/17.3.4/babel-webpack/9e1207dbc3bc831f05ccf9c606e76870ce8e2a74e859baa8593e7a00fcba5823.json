{"ast":null,"code":"import _asyncToGenerator from \"/Users/JessicaZimondi/Projects/GITHUB/Food-Ordering-App/myApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { PaymentModalPagePage } from './payment-modal-page/payment-modal-page.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/services/resturants.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nfunction CartPage_ion_list_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item\")(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"ion-item\")(8, \"ion-label\", 6);\n    i0.ɵɵtext(9, \"Delivery Instructions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"ion-textarea\", 7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.order.dish);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", ctx_r0.order.price, \"\");\n  }\n}\nexport let CartPage = /*#__PURE__*/(() => {\n  class CartPage {\n    constructor(restaurantService, navCtrl, modalController) {\n      this.restaurantService = restaurantService;\n      this.navCtrl = navCtrl;\n      this.modalController = modalController;\n      this.deliveryCharge = 5;\n      this.total = 0;\n      this.deliveryInstructions = '';\n      this.pastOrders = [];\n    }\n    //Refresh Cart Page with new orders\n    ngOnInit() {\n      this.refreshData();\n    }\n    ionViewWillEnter() {\n      this.refreshData();\n    }\n    refreshData() {\n      const storedOrder = localStorage.getItem('order');\n      if (storedOrder) {\n        this.order = JSON.parse(storedOrder);\n        this.total = this.order.price + this.deliveryCharge;\n      }\n    }\n    // Make Payment Modal\n    makePayment() {\n      this.pastOrders.push(this.order);\n      this.presentSuccessModal();\n      localStorage.setItem('pastOrders', JSON.stringify(this.pastOrders));\n      localStorage.removeItem('order');\n    }\n    presentSuccessModal() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this.modalController.create({\n          component: PaymentModalPagePage,\n          componentProps: {\n            message: 'Payment successful!'\n          }\n        });\n        yield modal.present();\n      })();\n    }\n    //Calculate Total According to Cart Order\n    updateTotal() {\n      this.total = this.order.price + this.deliveryCharge;\n    }\n    static #_ = this.ɵfac = function CartPage_Factory(t) {\n      return new (t || CartPage)(i0.ɵɵdirectiveInject(i1.ResturantsService), i0.ɵɵdirectiveInject(i2.NavController), i0.ɵɵdirectiveInject(i2.ModalController));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CartPage,\n      selectors: [[\"app-cart\"]],\n      decls: 37,\n      vars: 6,\n      consts: [[3, \"translucent\"], [3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [4, \"ngIf\"], [\"expand\", \"block\", 3, \"click\"], [\"position\", \"stacked\"], [\"placeholder\", \"Leave us any delivery instructions.\"]],\n      template: function CartPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n          i0.ɵɵtext(3, \"Cart\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(4, \"br\");\n          i0.ɵɵelementStart(5, \"ion-content\", 1)(6, \"ion-header\", 2)(7, \"ion-toolbar\")(8, \"ion-title\", 3);\n          i0.ɵɵtext(9, \"Cart\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(10, CartPage_ion_list_10_Template, 11, 2, \"ion-list\", 4);\n          i0.ɵɵelement(11, \"br\");\n          i0.ɵɵelementStart(12, \"ion-item\")(13, \"ion-label\");\n          i0.ɵɵtext(14, \"Item Total\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"ion-label\");\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"ion-item\")(18, \"ion-label\");\n          i0.ɵɵtext(19, \"Delivery Charge\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"ion-label\");\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"ion-item\")(23, \"ion-label\");\n          i0.ɵɵtext(24, \"Total To Pay\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"ion-label\");\n          i0.ɵɵtext(26);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(27, \"br\")(28, \"br\");\n          i0.ɵɵelementStart(29, \"ion-item\")(30, \"ion-label\")(31, \"h2\");\n          i0.ɵɵtext(32, \"Delivery Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"p\");\n          i0.ɵɵtext(34, \"University of Pretoria\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(35, \"ion-button\", 5);\n          i0.ɵɵlistener(\"click\", function CartPage_Template_ion_button_click_35_listener() {\n            return ctx.makePayment();\n          });\n          i0.ɵɵtext(36, \"Make Payment\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"translucent\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"fullscreen\", true);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.order);\n          i0.ɵɵadvance(6);\n          i0.ɵɵtextInterpolate1(\"R\", ctx.order.price, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"R \", ctx.deliveryCharge, \"\");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\"R \", ctx.total, \"\");\n        }\n      },\n      dependencies: [i3.NgIf, i2.IonButton, i2.IonContent, i2.IonHeader, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonTextarea, i2.IonTitle, i2.IonToolbar, i2.TextValueAccessor]\n    });\n  }\n  return CartPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}